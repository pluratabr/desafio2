<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Plurata - Data Analytics & Text Mining">
    <meta name="author" content="Plurata">
    <link rel="shortcut icon" href="assets/images/favicon.ico">
    <title>Plurata - Data Analytics & Text Mining</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,500,700" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karla:400,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rancho">
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="assets/plugins/morris/morris.css">
    <!-- App css -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- App favicon -->
    <!--Morris Chart CSS -->
    <link rel="stylesheet" href="assets/plugins/morris/morris.css">
    <link href="assets/css/icons.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/style.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <script src="assets/js/modernizr.min.js"></script>

    <style>
        .select2-container {
            width: 200px !important;
        }

        div.info {
            display: flex;
            justify-content: center;
            align-content: center;
            flex-direction: column;
            font-size: large;
            font-family: 'Roboto';
        }
    </style>
</head>

<body>
    <div id="droba-loader">
        <div class="loader"></div>
    </div>
    <!-- Navigation Bar-->
    <header id="topnav">
        <div class="topbar-main">
            <div class="container-fluid">
                <!-- Logo container-->
                <div class="logo">
                    <!-- Image Logo -->
                    <a href="../../index.html" class="logo">
                        <img src="assets/images/logo-plurata.png" alt="" height="26" class="logo-small">
                        <img src="assets/images/logo-plurata.png" alt="" height="24" class="logo-large">
                    </a>
                </div>
                <!-- End Logo container-->
                <div class="menu-extras topbar-custom">
                    <ul class="list-unstyled topbar-right-menu float-right mb-0">
                        <li class="menu-item">
                            <!-- Mobile menu toggle-->
                            <a class="navbar-toggle nav-link">
                                <div class="lines">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div>
                            </a>
                            <!-- End mobile menu toggle-->
                        </li>
                        <li>
                            <a class="btn btn-purple btn-trans waves-effect w-md waves-light m-b-5 btn-plurata"
                                style="margin-top: 15px;" href="https://hackathon.plurata.com.br">VOLTAR</a>
                        </li>
                    </ul>
                </div>
                <!-- end menu-extras -->
                <div class="clearfix"></div>
            </div> <!-- end container -->
        </div>
        <!-- end topbar-main -->
        <div class="navbar-custom">
            <div class="container-fluid">
                <div id="navigation">
                    <!-- Navigation Menu-->
                    <ul class="navigation-menu">
                        <li>
                            <a href="desafio2.html"><i class="mdi mdi-view-dashboard"></i><span> Dados Gerais
                                </span></a>
                        </li>
                        <li>
                            <a href="./inconsistencias.html"><i class="mdi mdi-view-dashboard"></i><span>
                                    Inconsistências</span></a>
                        </li>
                        <li>
                            <a href="./regras-tecnicas.html" style="color:#47169d;"><i
                                    class="mdi mdi-tune-vertical"></i><span> Regras Técnicas - Plugin </span></a>
                        </li>
                    </ul>

                    <!-- End navigation menu -->
                </div> <!-- end #navigation -->
            </div> <!-- end container -->
        </div> <!-- end navbar-custom -->
    </header>
    <!-- End Navigation Bar-->
    <div class="wrapper">
        <div class="container-fluid">
            <!-- Page-Title -->
            <div class="row">
                <div class="col-sm-3">
                    <h4 class="page-title">Cluster</h4>
                </div>
                <div class="col-sm-9">
                    <div class="pull-right" style="padding-top: 15px; margin-left: 15px;">
                        <select class="select2" id="clusterTribunal" >
                            <option value="">Tribunais</option>
                        </select>
                    </div>
                    <div class="pull-right" style="padding-top: 15px; margin-left: 15px;">
                        <select class="select2" id="clusterJustica" to="#clusterTribunal">
                            <option value="">Justiça</option>
                            <option value="tre">TRE</option>
                            <option value="tj">TJ</option>
                            <option value="trf">TRF</option>
                            <option value="tm">TM</option>
                            <option value="trt">TRT</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-xl-3 col-md-6">
                    <div class="card-box" style="min-height: 160px !important;">
                        <h4 class="header-title mb-3">Cluster 1</h4>
                        <div class="row widget-box-2 ">
                            <div class="col-sm-12 col-xl-12 col-md-12 ">
                                <div class="rounded-circle thumb-xl img-thumbnail m-b-10 text-center"
                                    style="color:whitesmoke; background-color: rgb(152, 223, 138); margin-left: 30%;">
                                    <h4 class="mb-0 ci-total-1" style="margin: 39% 0 0 5%;"> 10.000 </h4>
                                </div>
                            </div>
                            <div class="col-sm-12 col-xl-12 col-md-12">
                                <div class="row">
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h1 class="mb-3" style="font-size: 12px;">Varas</h1>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h1 class="mb-3" style="font-size: 12px;">Inconsistências</h1>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-left">
                                        <h1 class="mb-3" style="font-size: 12px;line-height: 17px;margin-top: 23px;">
                                            Potenciais Inconsistências</h1>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-varas-1"> 100 </h4>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-inconsistencias-1"> 10.000 </h4>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-potenciais-1"> 1.000 </h4>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-xl-3 col-md-6">
                    <div class="card-box" style="min-height: 160px !important;">
                        <h4 class="header-title mb-3">Cluster 2</h4>
                        <div class="row widget-box-2 ">
                            <div class="col-sm-12 col-xl-12 col-md-12 ">
                                <div class="rounded-circle thumb-xl img-thumbnail m-b-10 text-center"
                                    style="color:whitesmoke; background-color: rgb(31, 119, 180); margin-left: 30%;">
                                    <h4 class="mb-0 ci-total-2" style="margin: 39% 0 0 5%;"> 10.000 </h4>
                                </div>
                            </div>
                            <div class="col-sm-12 col-xl-12 col-md-12">
                                <div class="row">
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h1 class="mb-3 " style="font-size: 12px;">Varas</h1>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h1 class="mb-3 " style="font-size: 12px;">Inconsistências</h1>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-left">
                                        <h1 class="mb-3 " style="font-size: 12px;line-height: 17px;margin-top: 23px;">
                                            Potenciais Inconsistências</h1>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-varas-2"> 100 </h4>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-inconsistencias-2"> 10.000 </h4>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-potenciais-2"> 1.000 </h4>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-xl-3 col-md-6">
                    <div class="card-box" style="min-height: 160px !important;">
                        <h4 class="header-title mb-3">Cluster 3</h4>
                        <div class="row widget-box-2 ">
                            <div class="col-sm-12 col-xl-12 col-md-12 ">
                                <div class="rounded-circle thumb-xl img-thumbnail m-b-10 text-center"
                                    style="color:whitesmoke; background-color: rgb(197, 176, 213); margin-left: 30%;">
                                    <h4 class="mb-0 ci-total-3" style="margin: 39% 0 0 5%;"> 10.000 </h4>
                                </div>
                            </div>
                            <div class="col-sm-12 col-xl-12 col-md-12">
                                <div class="row">
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h1 class="mb-3" style="font-size: 12px;">Varas</h1>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h1 class="mb-3" style="font-size: 12px;">Inconsistências</h1>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-left">
                                        <h1 class="mb-3" style="font-size: 12px;line-height: 17px;margin-top: 23px;">
                                            Potenciais Inconsistências</h1>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-varas-3"> 100 </h4>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-inconsistencias-3"> 10.000 </h4>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-potenciais-3"> 1.000 </h4>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-xl-3 col-md-6">
                    <div class="card-box" style="min-height: 160px !important;">
                        <h4 class="header-title mb-3">Cluster 4</h4>
                        <div class="row widget-box-2 ">
                            <div class="col-sm-12 col-xl-12 col-md-12 ">
                                <div class="rounded-circle thumb-xl img-thumbnail m-b-10 text-center"
                                    style="color:whitesmoke; background-color: rgb(174, 199, 232); margin-left: 30%;">
                                    <h4 class="mb-0 ci-total-4" style="margin: 39% 0 0 5%;"> 10.000 </h4>
                                </div>
                            </div>
                            <div class="col-sm-12 col-xl-12 col-md-12">
                                <div class="row">
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h1 class="mb-3" style="font-size: 12px;">Varas</h1>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h1 class="mb-3" style="font-size: 12px;">Inconsistências</h1>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-left">
                                        <h1 class="mb-3" style="font-size: 12px;line-height: 17px;margin-top: 23px;">
                                            Potenciais Inconsistências</h1>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-varas-4"> 100 </h4>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-inconsistencias-4"> 10.000 </h4>
                                    </div>
                                    <div class="col-sm-4 col-xl-4 col-md-4 text-center">
                                        <h4 class="mb-0 ci-potenciais-4"> 1.000 </h4>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Page-Title -->
            <div class="row">
                <div class="col-sm-3">
                    <h4 class="page-title">Regras Técnicas </h4>
                </div>
                <div class="col-sm-9">
                    <div class="pull-right" style="padding-top: 15px; margin-left: 15px;">
                        <select class="select2" id="ruleTribunal" >
                            <option value="">Tribunais</option>
                        </select>
                    </div>
                    <div class="pull-right" style="padding-top: 15px; margin-left: 15px;">
                        <select class="select2" id="ruleJustica" to="#ruleTribunal">
                            <option value="">Justiça</option>
                            <option value="tre">TRE</option>
                            <option value="tj">TJ</option>
                            <option value="trf">TRF</option>
                            <option value="tm">TM</option>
                            <option value="trt">TRT</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-xl-12 col-md-12">
                    <div class="row card-box">
                        <div class="col-sm-12 col-xl-3 col-md-3">
                            <div class="m-b-15 m-t-15">
                                <label for="apartirde" class="col-form-label">Classe</label>
                                <select id="inputSecao" class="form-control">
                                    <option>Escolha uma Classe</option>
                                    <option>(120) Mandado de Segurança Cível</option>
                                    <option>(12727) Execução de Pena de Multa</option>
                                    <option>(11528) Ação Penal Eleitoral</option>
                                    <option>(11551) Consulta</option>
                                    <option>(198) Apelação Cível</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-12 col-xl-3 col-md-3">
                            <div class="m-b-15 m-t-15">
                                <label for="apartirde" class="col-form-label">Assunto</label>
                                <select id="inputClasse" class="form-control">
                                    <option>Escolha uma Assunto</option>
                                    <option>(11069) Crime Culposo</option>
                                    <option>(11085) Livramento Condicional</option>
                                    <option>(4310) Fiança</option>
                                    <option>(10904) Prisão Domiciliar / Especial</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="col-sm-12 col-xl-3 col-md-3">

                        </div>

                        <div class="col-sm-12 col-xl-3 col-md-3">

                        </div>

                        <div class="col-sm-12 col-xl-12 col-md-12">
                            <div class="card-box table-responsive">
                                <table id="rulesTable" class="table table-striped m-b-0">
                                    <thead>
                                        <tr>
                                            <th>Classe</th>
                                            <th>Assunto</th>
                                            <th class="text-center">Ocorrência</th>
                                            <th class="text-center">Valido</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
            <!-- Page-Title -->
            <div class="row">
                <div class="col-sm-3">
                    <h4 class="page-title">Ajuste de Processos</h4>
                </div>
                <div class="col-sm-9">
                    <div class="pull-right" style="padding-top: 15px; margin-left: 15px;">
                        <select class="select2" id="adjustmentTribunal" >
                            <option value="">Tribunais</option>
                        </select>
                    </div>
                    <div class="pull-right" style="padding-top: 15px; margin-left: 15px;">
                        <select class="select2" id="adjustmentJustica" to="#adjustmentTribunal">
                            <option value="">Justiça</option>
                            <option value="tre">TRE</option>
                            <option value="tj">TJ</option>
                            <option value="trf">TRF</option>
                            <option value="tm">TM</option>
                            <option value="trt">TRT</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-xl-12 col-md-12">
                    <div class="card-box table-responsive">
                        <table id="adjustmentTable" class="table table-striped m-b-0">
                            <thead>
                                <tr>
                                    <th>Número do Processo</th>
                                    <th>Classe</th>
                                    <th>Assunto</th>
                                    <th class="text-center">Ocorrência</th>
                                    <th>Válido</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end wrapper -->
    <!-- Footer -->
    <footer class="footer_area">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 text-center">
                    <p>Copyright &copy; 2020 <a href="#">Plarata - Data Analytics & Text Mining</a></p>
                </div>
            </div>
        </div>
    </footer>

    <!-- End Footer -->
    <!-- jQuery  -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/detect.js"></script>
    <script src="assets/js/fastclick.js"></script>
    <script src="assets/js/jquery.blockUI.js"></script>
    <script src="assets/js/waves.js"></script>
    <script src="assets/js/jquery.nicescroll.js"></script>
    <script src="assets/js/jquery.slimscroll.js"></script>
    <script src="assets/js/jquery.scrollTo.min.js"></script>
    <!-- App js -->
    <script src="assets/js/jquery.core.js"></script>
    <script src="assets/js/jquery.app.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/plugins/select2/js/select2.min.js" type="text/javascript"></script>
    <!-- Data Table js -->
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>


    <script type="text/javascript">
        jQuery(document).ready(function () {
            
            // init Select2
            console.log($(".select2").length);
            $(".select2").select2();

            csv  = [];

            console.log();

            $.ajax({
                type: "GET",
                url: "data/varas_valido.csv",
                async:false,
                dataType: "text",
                success: function(data) {
                    csv = CSVToArray(data);

                }
            });


            var getTribunais = function(justica, selector=false) {
                var tribunais = [];
                for(var i in csv) {
                    var row = csv[i];
                    if(row[0] == justica){
                        tribunais.push(row[1]);
                        if(selector) {
                            $(selector).append("<option value='"+ row[1] +"'>"+ row[1] + "</option>");
                        }
                    }
                }
                return tribunais;
            }

            $('select#clusterJustica, select#ruleJustica, select#adjustmentJustica').bind('change', function (i, e) {
                if($(this).val() != ""){
                    
                    var tribunais = getTribunais($(this).val(), 'select' + $(this).attr('to'));
                    console.log(tribunais);
                } else {
                    console.log('valor é inválido');
                }
            });

            $('select#clusterTribunal').bind('change', function (i, e) {
                

                var varas = 0;
                var inconsistencias = 0;
                var potenciais = 0;
                    
                for(var i in csv) {

                    var row = csv[i];
                    var just = row[0];
                    var trib = row[1];
                    
                    if($(this).val() == trib) {
                       
                        var ocorrencia = row[3];
                        var valido     = row[4];
                        var n_valido     = row[5];

                        var freq1      = row[6];
                        var freq2      = row[8];
                        var freq3      = row[7];


                        varas++;
                        inconsistencias += parseInt(n_valido);
                        potenciais += parseInt(freq1);

                        console.log(trib);
                        console.log(ocorrencia);
                        console.log(valido);

                    } 
                }

                $('.ci-total-1').html(varas)
                $('.ci-varas-1').html(varas);
                $('.ci-inconsistencias-1').html(inconsistencias);
                $('.ci-potenciais-1').html(potenciais);

            });

            /** EDITABLE TABLE */
            $('#rulesTable').DataTable({
                'paging': true, // Table pagination
                'ordering': true, // Column ordering
                'info': true, // Bottom left status text
                'responsive': true, // https://datatables.net/extensions/responsive/examples/
                // Text translation options
                "language": {
                    "sEmptyTable": "Nenhuma requisição foi encontrada",
                    "sInfo": "Mostrando _START_ de _END_ de um total de _TOTAL_ registros",
                    "sInfoEmpty": "Mostrando 0 de 0 de um total de 0 registros",
                    "sInfoFiltered": "(Filtrados de _MAX_ registros)",
                    "sInfoPostFix": "",
                    "sInfoThousands": ".",
                    "sLengthMenu": "_MENU_ Resultados por página",
                    "sLoadingRecords": "Carregando...",
                    "sProcessing": '<div class="backdrop"><div class="spinner"></div></div>',
                    "sZeroRecords": "Nenhum registro foi encontrado",
                    "sSearch": "Pesquisar por",
                    "oPaginate": {
                        "sNext": "Próximo",
                        "sPrevious": "Anterior",
                        "sFirst": "Primeiro",
                        "sLast": "Último"
                    },
                    "oAria": {
                        "sSortAscending": ": Ordenar colunas de forma ascendente",
                        "sSortDescending": ": Ordenar colunas de forma descendente"
                    },
                },
                "ajax": {
                    url: './data/rules.json',
                    crossDomain: true,

                },
                "columns": [
                    { "data": "cod_classe" },
                    { "data": "cod_assunto" },
                    { "data": "ocorrencia" },
                    {
                        "data": "valido",
                        "type": "readonly",
                        "fnCreatedCell": function (nTd, sData, oData, iRow, iCol) {
                            $(nTd).html("<span class='switchery switchery-default' style='box-shadow: rgb(114, 102, 186) 0px 0px 0px 0px inset; border-color: rgb(114, 102, 186); background-color: rgb(114, 102, 186); transition: border 0.4s ease 0s, box-shadow 0.4s ease 0s;'><small style='left: 0px; transition: background-color 0.4s ease 0s, left 0.2s ease 0s;'></small></span>");
                        }
                    }
                ]
            });
            //
            /** EDITABLE TABLE */
            $('#adjustmentTable').DataTable({
                'paging': true, // Table pagination
                'ordering': true, // Column ordering
                'info': true, // Bottom left status text
                'responsive': true, // https://datatables.net/extensions/responsive/examples/
                // Text translation options
                "language": {
                    "sEmptyTable": "Nenhuma requisição foi encontrada",
                    "sInfo": "Mostrando _START_ de _END_ de um total de _TOTAL_ registros",
                    "sInfoEmpty": "Mostrando 0 de 0 de um total de 0 registros",
                    "sInfoFiltered": "(Filtrados de _MAX_ registros)",
                    "sInfoPostFix": "",
                    "sInfoThousands": ".",
                    "sLengthMenu": "_MENU_ Resultados por página",
                    "sLoadingRecords": "Carregando...",
                    "sProcessing": '<div class="backdrop"><div class="spinner"></div></div>',
                    "sZeroRecords": "Nenhum registro foi encontrado",
                    "sSearch": "Pesquisar por",
                    "oPaginate": {
                        "sNext": "Próximo",
                        "sPrevious": "Anterior",
                        "sFirst": "Primeiro",
                        "sLast": "Último"
                    },
                    "oAria": {
                        "sSortAscending": ": Ordenar colunas de forma ascendente",
                        "sSortDescending": ": Ordenar colunas de forma descendente"
                    },
                },
                "ajax": {
                    url: './data/adjustments.json',
                    crossDomain: true,

                },
                "columns": [
                    { "data": "processo" },
                    { "data": "classe" },
                    { "data": "assunto" },
                    { "data": "ocorrencia" },
                    { "data": "valido" }
                ]
            });

            var edit = function (id) {

                console.log(id);
            }

            $('.ci-edit-table').bind('click', function () {
                var rowId = $(this).data.id;
                var subjectCell = $(this).closest('tr').find('nth-child(2)').html()
                console.log(rowId);
                console.log(subjectCell);
            });
        });

        /**
         * CSV Convert Function
         */
        function CSVToArray(strData, strDelimiter) {
            // Check to see if the delimiter is defined. If not,
            // then default to comma.
            strDelimiter = (strDelimiter || ",");

            // Create a regular expression to parse the CSV values.
            var objPattern = new RegExp(
                (
                    // Delimiters.
                    "(\\" + strDelimiter + "|\\r?\\n|\\r|^)" +

                    // Quoted fields.
                    "(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|" +

                    // Standard fields.
                    "([^\"\\" + strDelimiter + "\\r\\n]*))"
                ),
                "gi"
            );


            // Create an array to hold our data. Give the array
            // a default empty first row.
            var arrData = [
                []
            ];

            // Create an array to hold our individual pattern
            // matching groups.
            var arrMatches = null;


            // Keep looping over the regular expression matches
            // until we can no longer find a match.
            while (arrMatches = objPattern.exec(strData)) {

                // Get the delimiter that was found.
                var strMatchedDelimiter = arrMatches[1];

                // Check to see if the given delimiter has a length
                // (is not the start of string) and if it matches
                // field delimiter. If id does not, then we know
                // that this delimiter is a row delimiter.
                if (
                    strMatchedDelimiter.length &&
                    strMatchedDelimiter !== strDelimiter
                ) {

                    // Since we have reached a new row of data,
                    // add an empty row to our data array.
                    arrData.push([]);

                }

                var strMatchedValue;

                // Now that we have our delimiter out of the way,
                // let's check to see which kind of value we
                // captured (quoted or unquoted).
                if (arrMatches[2]) {

                    // We found a quoted value. When we capture
                    // this value, unescape any double quotes.
                    strMatchedValue = arrMatches[2].replace(
                        new RegExp("\"\"", "g"),
                        "\""
                    );

                } else {

                    // We found a non-quoted value.
                    strMatchedValue = arrMatches[3];

                }

                // Now that we have our value string, let's add
                // it to the data array.
                arrData[arrData.length - 1].push(strMatchedValue.trim());
            }
            //console.log(arrData);
            // Return the parsed data.
            return (arrData);
        }
    </script>



</body>

</html>